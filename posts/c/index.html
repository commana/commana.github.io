<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width">
		

		<title>C</title>

		
		<link rel="stylesheet" href="https://commana.github.io/css/colors-dark.min.217a2547e8e6c808986d22ef70b50263c2d6a4bbc80ed42e97e280a41103f9b5.css">

		
	</head>
	<body>
		<header id="header">
			<h1><a href="https://commana.github.io/">commana&#39;s home page</a></h1>
			<p></p>
		</header>

		<div id="page">
			<div id="sidebar">
				<nav>
	
</nav>

			</div>

			<div id="content">
				
	<article class="post">
		<h1><a href="https://commana.github.io/posts/c/">C</a> </h1>

		<div class="post-content"><p>The C programming language can be difficult for developers that are used to high-level concepts and libraries from their favorite language. At least for me, going &ldquo;back&rdquo; to C from languages like Java or JavaScript feels daunting.</p>
<p>Since I decided to write programs in the spirit of <a href="/posts/programs/">Donald Knuth</a>, I took on two projects that I am going to write in C: an image viewer with programming language support &ndash; where the programming language will be the second project. I&rsquo;m going to combine both ideas/projects at some later point. For now, I&rsquo;ll just develop them side by side.</p>
<p>Although I learned C during my first semester at University, my memory has almost faded. So I&rsquo;m practically starting from scratch. I take this as an opportunity to refresh my knowledge and this post will contain all the little snippets that I will find useful to remember.</p>
<p>As always in my <a href="/about/">Digital Garden</a>, I&rsquo;m going to update this post from time to time.</p>
<hr>
<p><strong>Note:</strong> These examples reflect my current understanding of programming in C. They&rsquo;re almost certainly not the most easiest, most efficient, or otherwise most optimized versions of the specific tasks they try to achieve. So, be warned. :-)</p>
<h3 id="dynamic-two-dimensional-char-array">Dynamic two-dimensional char array</h3>
<p>This is a simplified version of how to create a dynamically-sized, two-dimensional char array.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-C" data-lang="C"><span style="color:#75715e">// Initialize 2-dimensional char array,
</span><span style="color:#75715e">// i.e. an array of strings.
</span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> num_entries <span style="color:#f92672">=</span> <span style="color:#ae81ff">42</span>; <span style="color:#75715e">// this would be dynamic
</span><span style="color:#75715e"></span><span style="color:#66d9ef">char</span> <span style="color:#f92672">**</span>array_of_strings <span style="color:#f92672">=</span> malloc(num_entries <span style="color:#f92672">*</span> <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>));

<span style="color:#75715e">// .. now for every entry we need to create space
</span><span style="color:#75715e">// Imagine we are looping through &#39;num_entries&#39; using &#39;index&#39;:
</span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> index <span style="color:#f92672">=</span> <span style="color:#ae81ff">21</span>; <span style="color:#75715e">// would be a loop counter
</span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> len <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>; <span style="color:#75715e">// The length of the string we want to store.
</span><span style="color:#75715e"></span>              <span style="color:#75715e">// If this would be derived from strlen,
</span><span style="color:#75715e"></span>              <span style="color:#75715e">// we would need to add 1 to incorporate &#39;\0&#39;.
</span><span style="color:#75715e"></span>array_of_strings[index] <span style="color:#f92672">=</span> malloc(len <span style="color:#f92672">*</span> <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>));

<span style="color:#75715e">// ... ready to go:
</span><span style="color:#75715e"></span>strcpy(array_of_strings[index], <span style="color:#e6db74">&#34;a string&#34;</span>);
<span style="color:#75715e">// or whatever we want to do ...
</span><span style="color:#75715e"></span>
<span style="color:#75715e">// And don&#39;t forget to free all pointers
</span><span style="color:#75715e">// by looping through &#39;num_entries&#39;:
</span><span style="color:#75715e"></span>free(array_of_strings[index]); <span style="color:#75715e">// free each string
</span><span style="color:#75715e"></span>free(array_of_strings); <span style="color:#75715e">// free the array itself
</span></code></pre></div><hr>
<p>(To be continued.)</p>
</div>

		<p class="meta">Posted on <span class="postdate">12. May 2020</span></p>
	</article>

			</div>

			<footer id="footer">
				<p class="copyright">
					
						Powered by <a href="https://gohugo.io/">Hugo</a> and the
						<a href="https://github.com/bake/solar-theme-hugo">Solar</a>-theme.
					
				</p>
			</footer>
		</div>

		
	</body>
</html>
